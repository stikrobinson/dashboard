var he=Object.defineProperty;var me=(e,n,t)=>n in e?he(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var i=(e,n,t)=>me(e,typeof n!="symbol"?n+"":n,t);import{c as xe,r as Ee,n as Y,g as Se,E as Pe,b as fe,d as ve,e as we,p as Ie,N as Ce,A as ge,f as be,h as Re,S as Ae,D as ze,i as Fe,j as _e,k as De,l as ke,m as $e,o as Oe,q as He,t as Ue,u as Ne,v as Le,w as Te,x as Me,y as Ge,C as qe,z as je,B as Be,F as Ve,G as Je,H as We,I as Ke,J as Xe,K as Qe,L as Ye,M as Ze,O as et,P as tt,Q as nt,R as st,T as ot,U as R,V as rt,W as m,a as Z,X as ee}from"./index-DqprQApi.js";import{t as it,f as at,a as dt,b as ct,s as lt,F as ut,H as pt,e as b,c as yt,p as ht,d as mt,g as te}from"./index-DGo2LLwK.js";const ne=(e,n)=>{const t={};for(const s in n)xt(t,e,n,s);return t},xt=(e,n,t,s)=>{if(n!==null){let r=t[s];typeof r=="function"&&(r=[,r]);const[p=Et,E=St,P=s]=r;(typeof p=="function"&&p(n[P])||typeof p!="function"&&p)&&(e[s]=E(n[P]));return}let[o,a]=t[s];if(typeof a=="function"){let r;const p=o===void 0&&(r=a())!=null,E=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;p?e[s]=r:E&&(e[s]=a())}else{const r=o===void 0&&a!=null,p=typeof o=="function"&&!!o(a)||typeof o!="function"&&!!o;(r||p)&&(e[s]=a)}},Et=e=>e!=null,St=e=>e,u=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(n=>n!=null).map(u);if(typeof e=="object"){const n={};for(const t of Object.keys(e))e[t]!=null&&(n[t]=u(e[t]));return n}return e},A=(e,n)=>xe(e,n).then(t=>{if(t.length)try{return JSON.parse(t)}catch(s){throw(s==null?void 0:s.name)==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:t}),s}return{}}),Pt=async(e,n)=>{const t=await A(e,n);return t.message=t.message??t.Message,t},ft=(e,n)=>{const t=(a,r)=>Object.keys(a).find(p=>p.toLowerCase()===r.toLowerCase()),s=a=>{let r=a;return typeof r=="number"&&(r=r.toString()),r.indexOf(",")>=0&&(r=r.split(",")[0]),r.indexOf(":")>=0&&(r=r.split(":")[0]),r.indexOf("#")>=0&&(r=r.split("#")[1]),r},o=t(e.headers,"x-amzn-errortype");if(o!==void 0)return s(e.headers[o]);if(n&&typeof n=="object"){const a=t(n,"code");if(a&&n[a]!==void 0)return s(n[a]);if(n.__type!==void 0)return s(n.__type)}},vt=async(e,n,t)=>({operation:Se(n).operation,region:await Y(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function wt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function g(e){return{schemeId:"smithy.api#noAuth"}}const It=e=>{const n=[];switch(e.operation){case"GetCredentialsForIdentity":{n.push(g());break}case"GetId":{n.push(g());break}case"GetOpenIdToken":{n.push(g());break}case"UnlinkIdentity":{n.push(g());break}default:n.push(wt(e))}return n},Ct=e=>{const n=Ee(e);return Object.assign(n,{authSchemePreference:Y(e.authSchemePreference??[])})},gt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),se={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},bt="3.846.0",Rt={version:bt},oe="required",c="fn",l="argv",v="ref",G=!0,q="isSet",C="booleanEquals",f="error",x="endpoint",S="tree",z="PartitionResult",F="getAttr",w="stringEquals",j={[oe]:!1,type:"String"},B={[oe]:!0,default:!1,type:"Boolean"},V={[v]:"Endpoint"},re={[c]:C,[l]:[{[v]:"UseFIPS"},!0]},ie={[c]:C,[l]:[{[v]:"UseDualStack"},!0]},d={},I={[v]:"Region"},J={[c]:F,[l]:[{[v]:z},"supportsFIPS"]},ae={[v]:z},W={[c]:C,[l]:[!0,{[c]:F,[l]:[ae,"supportsDualStack"]}]},K=[re],X=[ie],Q=[I],At={parameters:{Region:j,UseDualStack:B,UseFIPS:B,Endpoint:j},rules:[{conditions:[{[c]:q,[l]:[V]}],rules:[{conditions:K,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:f},{conditions:X,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:f},{endpoint:{url:V,properties:d,headers:d},type:x}],type:S},{conditions:[{[c]:q,[l]:Q}],rules:[{conditions:[{[c]:"aws.partition",[l]:Q,assign:z}],rules:[{conditions:[re,ie],rules:[{conditions:[{[c]:C,[l]:[G,J]},W],rules:[{conditions:[{[c]:w,[l]:[I,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:d,headers:d},type:x},{conditions:[{[c]:w,[l]:[I,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:d,headers:d},type:x},{conditions:[{[c]:w,[l]:[I,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:d,headers:d},type:x},{conditions:[{[c]:w,[l]:[I,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:d,headers:d},type:x},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:d,headers:d},type:x}],type:S},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:f}],type:S},{conditions:K,rules:[{conditions:[{[c]:C,[l]:[J,G]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:d,headers:d},type:x}],type:S},{error:"FIPS is enabled but this partition does not support FIPS",type:f}],type:S},{conditions:X,rules:[{conditions:[W],rules:[{conditions:[{[c]:w,[l]:["aws",{[c]:F,[l]:[ae,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:d,headers:d},type:x},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:d,headers:d},type:x}],type:S},{error:"DualStack is enabled but this partition does not support DualStack",type:f}],type:S},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:d,headers:d},type:x}],type:S}],type:S},{error:"Invalid Configuration: Missing Region",type:f}]},zt=At,Ft=new Pe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),_t=(e,n={})=>Ft.get(e,()=>fe(zt,{endpointParams:e,logger:n.logger}));we.aws=ve;const Dt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??ct,base64Encoder:(e==null?void 0:e.base64Encoder)??dt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??_t,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??It,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new ge},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new be}],logger:(e==null?void 0:e.logger)??new Ce,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Ie,utf8Decoder:(e==null?void 0:e.utf8Decoder)??at,utf8Encoder:(e==null?void 0:e.utf8Encoder)??it}),kt=e=>{const n=Re(e),t=()=>n().then(He),s=Dt(e);return{...s,...e,runtime:"browser",defaultsMode:n,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ke,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??De({serviceId:s.serviceId,clientVersion:Rt.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??_e,region:(e==null?void 0:e.region)??Fe("Region is missing"),requestHandler:ut.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||ze),sha256:(e==null?void 0:e.sha256)??Ae,streamCollector:(e==null?void 0:e.streamCollector)??lt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Oe)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve($e))}},$t=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const a=n.findIndex(r=>r.schemeId===o.schemeId);a===-1?n.push(o):n.splice(a,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},Ot=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Ht=(e,n)=>{const t=Object.assign(Ue(e),Ne(e),Le(e),$t(e));return n.forEach(s=>s.configure(t)),Object.assign(e,Te(t),Me(t),Ge(t),Ot(t))};class cn extends qe{constructor(...[t]){const s=kt(t||{});super(s);i(this,"config");this.initConfig=s;const o=gt(s),a=je(o),r=Be(a),p=Ve(r),E=nt(p),P=Je(E),ue=Ct(P),pe=Ht(ue,(t==null?void 0:t.extensions)||[]);this.config=pe,this.middlewareStack.use(We(this.config)),this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Qe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(et(this.config,{httpAuthSchemeParametersProvider:vt,identityProviderConfigProvider:async ye=>new st({"aws.auth#sigv4":ye.credentials})})),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}}class y extends ot{constructor(n){super(n),Object.setPrototypeOf(this,y.prototype)}}class _ extends y{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});i(this,"name","InternalErrorException");i(this,"$fault","server");Object.setPrototypeOf(this,_.prototype)}}class D extends y{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});i(this,"name","InvalidParameterException");i(this,"$fault","client");Object.setPrototypeOf(this,D.prototype)}}class k extends y{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});i(this,"name","LimitExceededException");i(this,"$fault","client");Object.setPrototypeOf(this,k.prototype)}}class $ extends y{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});i(this,"name","NotAuthorizedException");i(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class O extends y{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});i(this,"name","ResourceConflictException");i(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class H extends y{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});i(this,"name","TooManyRequestsException");i(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}class U extends y{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});i(this,"name","ResourceNotFoundException");i(this,"$fault","client");Object.setPrototypeOf(this,U.prototype)}}class N extends y{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});i(this,"name","ExternalServiceException");i(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class L extends y{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});i(this,"name","InvalidIdentityPoolConfigurationException");i(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}}class T extends y{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});i(this,"name","DeveloperUserAlreadyRegisteredException");i(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}}class M extends y{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});i(this,"name","ConcurrentModificationException");i(this,"$fault","client");Object.setPrototypeOf(this,M.prototype)}}const Ut=e=>({...e,...e.Logins&&{Logins:R}}),Nt=e=>({...e,...e.SecretKey&&{SecretKey:R}}),Lt=e=>({...e,...e.Credentials&&{Credentials:Nt(e.Credentials)}}),Tt=e=>({...e,...e.Logins&&{Logins:R}}),Mt=async(e,n)=>{const t=le("GetCredentialsForIdentity");let s;return s=JSON.stringify(u(e)),ce(n,t,"/",void 0,s)},Gt=async(e,n)=>{const t=le("GetId");let s;return s=JSON.stringify(u(e)),ce(n,t,"/",void 0,s)},qt=async(e,n)=>{if(e.statusCode>=300)return de(e,n);const t=await A(e.body,n);let s={};return s=sn(t),{$metadata:h(e),...s}},jt=async(e,n)=>{if(e.statusCode>=300)return de(e,n);const t=await A(e.body,n);let s={};return s=u(t),{$metadata:h(e),...s}},de=async(e,n)=>{const t={...e,body:await Pt(e.body,n)},s=ft(e,t.body);switch(s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Wt(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Xt(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Qt(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Yt(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Zt(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await tn(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await en(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Jt(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Kt(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Vt(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Bt(t);default:const o=t.body;return on({output:e,parsedBody:o,errorCode:s})}},Bt=async(e,n)=>{const t=e.body,s=u(t),o=new M({$metadata:h(e),...s});return m(o,t)},Vt=async(e,n)=>{const t=e.body,s=u(t),o=new T({$metadata:h(e),...s});return m(o,t)},Jt=async(e,n)=>{const t=e.body,s=u(t),o=new N({$metadata:h(e),...s});return m(o,t)},Wt=async(e,n)=>{const t=e.body,s=u(t),o=new _({$metadata:h(e),...s});return m(o,t)},Kt=async(e,n)=>{const t=e.body,s=u(t),o=new L({$metadata:h(e),...s});return m(o,t)},Xt=async(e,n)=>{const t=e.body,s=u(t),o=new D({$metadata:h(e),...s});return m(o,t)},Qt=async(e,n)=>{const t=e.body,s=u(t),o=new k({$metadata:h(e),...s});return m(o,t)},Yt=async(e,n)=>{const t=e.body,s=u(t),o=new $({$metadata:h(e),...s});return m(o,t)},Zt=async(e,n)=>{const t=e.body,s=u(t),o=new O({$metadata:h(e),...s});return m(o,t)},en=async(e,n)=>{const t=e.body,s=u(t),o=new U({$metadata:h(e),...s});return m(o,t)},tn=async(e,n)=>{const t=e.body,s=u(t),o=new H({$metadata:h(e),...s});return m(o,t)},nn=(e,n)=>ne(e,{AccessKeyId:b,Expiration:t=>yt(ht(mt(t))),SecretKey:b,SessionToken:b}),sn=(e,n)=>ne(e,{Credentials:t=>nn(t),IdentityId:b}),h=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),on=rt(y),ce=async(e,n,t,s,o)=>{const{hostname:a,protocol:r="https",port:p,path:E}=await e.endpoint(),P={protocol:r,hostname:a,port:p,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:n};return o!==void 0&&(P.body=o),new pt(P)};function le(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class ln extends Z.classBuilder().ep(se).m(function(n,t,s,o){return[te(s,this.serialize,this.deserialize),ee(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Ut,Lt).ser(Mt).de(qt).build(){}class un extends Z.classBuilder().ep(se).m(function(n,t,s,o){return[te(s,this.serialize,this.deserialize),ee(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Tt,void 0).ser(Gt).de(jt).build(){}export{cn as CognitoIdentityClient,ln as GetCredentialsForIdentityCommand,un as GetIdCommand};
